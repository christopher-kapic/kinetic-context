---
title: Installation
description: Detailed installation instructions for kinetic-context
---

# Installation

There are two ways to install kinetic-context: manual installation (recommended) or using the automated setup script.

## Manual Installation (Recommended)

Manual installation is the recommended approach as it gives you full visibility and control over what's being set up, and follows security best practices by avoiding running scripts from the internet.

### Step 1: Create Directory Structure

```bash
mkdir -p ~/.kctx/{bin,packages,local-packages,projects,opencode/{config,state}}
```

### Step 2: Create Docker Compose File

Create `~/.kctx/compose.yaml`:

```yaml
version: '3.8'

services:
  opencode:
    image: ghcr.io/anomalyco/opencode:latest
    ports:
      - "7168:4096"
    volumes:
      - ~/.kctx/opencode/config:/config
      - ~/.kctx/opencode/state:/state
      - ~/.kctx/packages:/packages
      - ~/.kctx/local-packages:/local-packages
    command: ["serve", "--hostname=0.0.0.0"]
    environment:
      - OPENCODE_CONFIG=/config/opencode.json
      - XDG_STATE_HOME=/state # separate state volume for persistence
    restart: unless-stopped

  kinetic-context:
    image: christopherkapic/kinetic-context:latest
    ports:
      - "7167:3000"
    volumes:
      - ~/.kctx/packages:/packages
      - ~/.kctx/local-packages:/local-packages
      - ~/.kctx/projects:/projects
      - ~/.kctx/opencode/config:/config
    environment:
      - CORS_ORIGIN=http://localhost:7167
      - NODE_ENV=production
      - PACKAGES_DIR=/packages
      - LOCAL_PACKAGES_DIR=/local-packages
      - PROJECTS_DIR=/projects
      - OPENCODE_CONFIG_PATH=/config/opencode.json
      - OPENCODE_URL=http://opencode:4096
    depends_on:
      - opencode
    restart: unless-stopped
```

### Step 3: Create OpenCode Configuration

Create `~/.kctx/opencode/config/opencode.json`:

```json
{
  "$schema": "https://opencode.ai/config.json",
  "provider": {
    "openrouter": {
      "npm": "@ai-sdk/openai-compatible",
      "name": "OpenRouter",
      "options": {
        "baseURL": "https://openrouter.ai/api/v1",
        "apiKey": "your-api-key-here"
      },
      "models": {
        "openrouter/anthropic/claude-3.5-sonnet": {
          "name": "Claude 3.5 Sonnet"
        }
      }
    }
  },
  "model": "openrouter/anthropic/claude-3.5-sonnet"
}
```

### Step 4: Create kctx Command

Create `~/.kctx/bin/kctx`:

```bash
#!/bin/bash

set -e

COMPOSE_FILE="$HOME/.kctx/compose.yaml"

if [ ! -f "$COMPOSE_FILE" ]; then
  echo "Error: compose.yaml not found at $COMPOSE_FILE"
  echo "Please run the setup script again."
  exit 1
fi

# Detect container runtime (docker or podman)
if command -v docker >/dev/null 2>&1; then
  CONTAINER_CMD="docker"
elif command -v podman >/dev/null 2>&1; then
  CONTAINER_CMD="podman"
else
  echo "Error: Neither docker nor podman is installed."
  echo "Please install docker or podman to use kinetic-context."
  exit 1
fi

case "${1:-start}" in
  start)
    echo "Starting kinetic-context..."
    $CONTAINER_CMD compose -f "$COMPOSE_FILE" up -d
    echo "kinetic-context is running!"
    echo "  Web UI: http://localhost:7167"
    echo "  OpenCode: http://localhost:7168"
    ;;
  stop)
    echo "Stopping kinetic-context..."
    $CONTAINER_CMD compose -f "$COMPOSE_FILE" stop
    ;;
  restart)
    echo "Restarting kinetic-context..."
    $CONTAINER_CMD compose -f "$COMPOSE_FILE" restart
    ;;
  status)
    $CONTAINER_CMD compose -f "$COMPOSE_FILE" ps
    ;;
  logs)
    SERVICE="${2:-}"
    # Map aliases to service names
    case "$SERVICE" in
      kc)
        SERVICE="kinetic-context"
        ;;
      oc)
        SERVICE="opencode"
        ;;
    esac
    # If no service specified, show logs from both containers
    if [ -z "$SERVICE" ]; then
      $CONTAINER_CMD compose -f "$COMPOSE_FILE" logs
    else
      $CONTAINER_CMD compose -f "$COMPOSE_FILE" logs "$SERVICE"
    fi
    ;;
  down)
    echo "Stopping and removing containers..."
    $CONTAINER_CMD compose -f "$COMPOSE_FILE" down
    ;;
  update)
    echo "Updating kinetic-context..."
    echo "Pulling latest images..."
    $CONTAINER_CMD pull ghcr.io/anomalyco/opencode:latest
    $CONTAINER_CMD pull christopherkapic/kinetic-context:latest
    echo "Restarting services with new images..."
    $CONTAINER_CMD compose -f "$COMPOSE_FILE" up -d --force-recreate
    echo "Update complete!"
    ;;
  *)
    echo "Usage: kctx [start|stop|restart|status|logs|down|update]"
    echo ""
    echo "Commands:"
    echo "  start    - Start the services (default)"
    echo "  stop     - Stop the services"
    echo "  restart  - Restart the services"
    echo "  status   - Show service status"
    echo "  logs     - Show latest logs from both containers"
    echo "  logs kc  - Show latest logs from kinetic-context container"
    echo "  logs oc  - Show latest logs from opencode container"
    echo "  down     - Stop and remove containers"
    echo "  update   - Pull latest images and restart services"
    exit 1
    ;;
esac
```

Make it executable:
```bash
chmod +x ~/.kctx/bin/kctx
```

### Step 5: Authenticate to GitHub Container Registry

```bash
docker login ghcr.io
```

### Step 6: Start Services

```bash
kctx start
```

Or simply:
```bash
kctx
```

## Automated Installation (Alternative)

If you prefer to use an automated setup script, you can use the installation script:

### Quick Install

```bash
bash <(curl -fsSL https://raw.githubusercontent.com/christopher-kapic/kinetic-context/master/setup.sh)
```

This script will:
- Create the `~/.kctx` directory structure
- Generate a Docker Compose configuration file
- Create the `kctx` command-line tool
- Set up example configuration files

### What Gets Installed

The installation script creates the following structure:

```
~/.kctx/
├── bin/
│   └── kctx              # Command-line tool
├── packages/             # Package repositories and configs
├── local-packages/       # Local package repositories
├── projects/             # Project configurations
├── opencode/
│   ├── config/
│   │   └── opencode.json # OpenCode configuration
│   └── state/            # OpenCode state (persists across restarts)
└── compose.yaml          # Docker Compose configuration
```

### Post-Installation Steps

After running the script, you need to:

1. **Authenticate to GitHub Container Registry** (required):
   ```bash
   docker login ghcr.io
   ```
   You'll need a GitHub Personal Access Token with `read:packages` permission. See [Getting Started](/docs/getting-started#step-2-authenticate-to-github-container-registry) for details.

2. **Configure OpenCode** - Edit `~/.kctx/opencode/config/opencode.json` with your API key

3. **Add kctx to PATH** - Add `~/.kctx/bin` to your PATH environment variable

4. **Start the services**:
   ```bash
   kctx start
   ```

## Docker Image Tags

The kinetic-context Docker image is available on DockerHub:

- `christopherkapic/kinetic-context:latest` - Latest stable release
- `christopherkapic/kinetic-context:0.1.0` - Specific version (example)

## System Requirements

- **Docker**: Version 20.10 or later
- **Docker Compose**: Version 2.0 or later
- **Disk Space**: At least 2GB free (for Docker images and package repositories)
- **Memory**: 2GB RAM minimum (4GB recommended)

## Platform Support

kinetic-context runs on:
- Linux (x86_64, ARM64)
- macOS (Intel, Apple Silicon)
- Windows (via WSL2 or Docker Desktop)

## Updating

To update to the latest version:

```bash
kctx update
```

This command will automatically pull the latest images for both kinetic-context and opencode, then restart the services with the new images.

## Uninstallation

To remove kinetic-context:

```bash
# Stop and remove containers
kctx down

# Remove the directory (optional)
rm -rf ~/.kctx
```

Note: This will delete all your configuration and data. Make sure to back up anything important first.
